{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst API_BASE = 'http://localhost:8000/api'; // Update with your backend URL\n\n// Async Thunks\nexport const uploadFile = createAsyncThunk('files/upload', async (fileData, thunkAPI) => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.post(`${API_BASE}/files/upload/`, fileData, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n  return response.data;\n});\nexport const fetchFiles = createAsyncThunk('files/fetch', async () => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.get(`${API_BASE}/files/`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return response.data;\n});\nexport const shareFile = createAsyncThunk('files/share', async ({\n  fileId,\n  data\n}) => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.post(`${API_BASE}/files/share/${fileId}/`, data, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return response.data;\n});\nexport const generateShareableLink = createAsyncThunk('files/generateLink', async fileId => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.post(`${API_BASE}/files/shareable-link/${fileId}/`, {}, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return response.data;\n});\nconst fileSlice = createSlice({\n  name: 'files',\n  initialState: {\n    files: [],\n    status: 'idle',\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchFiles.fulfilled, (state, action) => {\n      state.files = action.payload;\n    }).addCase(uploadFile.fulfilled, (state, action) => {\n      state.files.push(action.payload);\n    });\n  }\n});\nexport default fileSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","API_BASE","uploadFile","fileData","thunkAPI","token","localStorage","getItem","response","post","headers","Authorization","data","fetchFiles","get","shareFile","fileId","generateShareableLink","fileSlice","name","initialState","files","status","error","reducers","extraReducers","builder","addCase","fulfilled","state","action","payload","push","reducer"],"sources":["/Users/prashant/Development/file-sharing/src/features/files/fileSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst API_BASE = 'http://localhost:8000/api'; // Update with your backend URL\n\n// Async Thunks\nexport const uploadFile = createAsyncThunk('files/upload', async (fileData, thunkAPI) => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.post(`${API_BASE}/files/upload/`, fileData, {\n    headers: { Authorization: `Bearer ${token}`, 'Content-Type': 'multipart/form-data' },\n  });\n  return response.data;\n});\n\nexport const fetchFiles = createAsyncThunk('files/fetch', async () => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.get(`${API_BASE}/files/`, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return response.data;\n});\n\nexport const shareFile = createAsyncThunk('files/share', async ({ fileId, data }) => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.post(`${API_BASE}/files/share/${fileId}/`, data, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return response.data;\n});\n\nexport const generateShareableLink = createAsyncThunk('files/generateLink', async (fileId) => {\n  const token = localStorage.getItem('accessToken');\n  const response = await axios.post(`${API_BASE}/files/shareable-link/${fileId}/`, {}, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return response.data;\n});\n\nconst fileSlice = createSlice({\n  name: 'files',\n  initialState: { files: [], status: 'idle', error: null },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchFiles.fulfilled, (state, action) => {\n        state.files = action.payload;\n      })\n      .addCase(uploadFile.fulfilled, (state, action) => {\n        state.files.push(action.payload);\n      });\n  },\n});\n\nexport default fileSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,2BAA2B,CAAC,CAAC;;AAE9C;AACA,OAAO,MAAMC,UAAU,GAAGH,gBAAgB,CAAC,cAAc,EAAE,OAAOI,QAAQ,EAAEC,QAAQ,KAAK;EACvF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EACjD,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,GAAGR,QAAQ,gBAAgB,EAAEE,QAAQ,EAAE;IACvEO,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUN,KAAK,EAAE;MAAE,cAAc,EAAE;IAAsB;EACrF,CAAC,CAAC;EACF,OAAOG,QAAQ,CAACI,IAAI;AACtB,CAAC,CAAC;AAEF,OAAO,MAAMC,UAAU,GAAGd,gBAAgB,CAAC,aAAa,EAAE,YAAY;EACpE,MAAMM,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EACjD,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACc,GAAG,CAAC,GAAGb,QAAQ,SAAS,EAAE;IACrDS,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUN,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOG,QAAQ,CAACI,IAAI;AACtB,CAAC,CAAC;AAEF,OAAO,MAAMG,SAAS,GAAGhB,gBAAgB,CAAC,aAAa,EAAE,OAAO;EAAEiB,MAAM;EAAEJ;AAAK,CAAC,KAAK;EACnF,MAAMP,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EACjD,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,GAAGR,QAAQ,gBAAgBe,MAAM,GAAG,EAAEJ,IAAI,EAAE;IAC5EF,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUN,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOG,QAAQ,CAACI,IAAI;AACtB,CAAC,CAAC;AAEF,OAAO,MAAMK,qBAAqB,GAAGlB,gBAAgB,CAAC,oBAAoB,EAAE,MAAOiB,MAAM,IAAK;EAC5F,MAAMX,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EACjD,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,GAAGR,QAAQ,yBAAyBe,MAAM,GAAG,EAAE,CAAC,CAAC,EAAE;IACnFN,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUN,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOG,QAAQ,CAACI,IAAI;AACtB,CAAC,CAAC;AAEF,MAAMM,SAAS,GAAGpB,WAAW,CAAC;EAC5BqB,IAAI,EAAE,OAAO;EACbC,YAAY,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,MAAM,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAK,CAAC;EACxDC,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACd,UAAU,CAACe,SAAS,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAChDD,KAAK,CAACR,KAAK,GAAGS,MAAM,CAACC,OAAO;IAC9B,CAAC,CAAC,CACDJ,OAAO,CAACzB,UAAU,CAAC0B,SAAS,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAChDD,KAAK,CAACR,KAAK,CAACW,IAAI,CAACF,MAAM,CAACC,OAAO,CAAC;IAClC,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,eAAeb,SAAS,CAACe,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}