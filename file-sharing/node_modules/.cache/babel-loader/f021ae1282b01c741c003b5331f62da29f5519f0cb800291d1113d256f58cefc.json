{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{shareFile,fetchFiles,generateSecureLink,downloadFile}from'./fileSlice';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FileListPage=()=>{const dispatch=useDispatch();const{files,secureLink}=useSelector(state=>state.files);const[selectedFileId,setSelectedFileId]=useState(null);const[secureLinkFileId,setSecureLinkFileId]=useState(null);const[email,setEmail]=useState('');const[permission,setPermission]=useState('view');useEffect(()=>{dispatch(fetchFiles());},[dispatch]);const handleShare=e=>{e.preventDefault();dispatch(shareFile({fileId:selectedFileId,data:{email,permission}}));setSelectedFileId(null);setEmail('');};const handleGenerateSecureLink=fileId=>{dispatch(generateSecureLink(fileId));setSecureLinkFileId(fileId);};const handleCopyToClipboard=()=>{if(secureLink){navigator.clipboard.writeText(secureLink);alert('Secure link copied to clipboard!');}};const handleDownload=fileId=>{dispatch(downloadFile(fileId));};return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-4xl bg-white shadow-md rounded-lg p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-700 mb-6 text-center\",children:\"Your Files\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200\",children:files.map((file,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-4 px-6 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 font-medium\",children:file.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedFileId(file.file_id),className:\"bg-blue-500 text-white py-1 px-3 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300\",children:\"Share\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleGenerateSecureLink(file.file_id),className:\"bg-green-500 text-white py-1 px-3 rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300\",children:\"Generate Secure Link\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownload(file.file_id),className:\"bg-gray-500 text-white py-1 px-3 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300\",children:\"Download\"})]})]}),secureLinkFileId===file.file_id&&secureLink&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"Secure Link: \",secureLink]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCopyToClipboard,className:\"ml-4 bg-blue-500 text-white py-1 px-3 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300\",children:\"Copy to Clipboard\"})]})]},index))}),selectedFileId&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-6 bg-gray-50 border rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 text-gray-700\",children:[\"Share File (ID: \",selectedFileId,\")\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleShare,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-gray-600 font-medium mb-2\",children:\"Recipient Email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",placeholder:\"Enter recipient's email\",value:email,onChange:e=>setEmail(e.target.value),required:true,className:\"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"permission\",className:\"block text-gray-600 font-medium mb-2\",children:\"Permission:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"permission\",value:permission,onChange:e=>setPermission(e.target.value),className:\"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"view\",children:\"View\"}),/*#__PURE__*/_jsx(\"option\",{value:\"download\",children:\"Download\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setSelectedFileId(null),className:\"bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300\",children:\"Share\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/upload\",className:\"text-blue-500 hover:text-blue-700\",children:\"Go to Upload Page\"})})]})});};export default FileListPage;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","shareFile","fetchFiles","generateSecureLink","downloadFile","Link","jsx","_jsx","jsxs","_jsxs","FileListPage","dispatch","files","secureLink","state","selectedFileId","setSelectedFileId","secureLinkFileId","setSecureLinkFileId","email","setEmail","permission","setPermission","handleShare","e","preventDefault","fileId","data","handleGenerateSecureLink","handleCopyToClipboard","navigator","clipboard","writeText","alert","handleDownload","className","children","map","file","index","title","onClick","file_id","onSubmit","htmlFor","id","type","placeholder","value","onChange","target","required","to"],"sources":["/Users/prashant/Development/file-sharing/src/features/files/FileListPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { shareFile, fetchFiles, generateSecureLink, downloadFile } from './fileSlice';\nimport { Link } from 'react-router-dom';\n\nconst FileListPage = () => {\n  const dispatch = useDispatch();\n  const { files, secureLink } = useSelector((state) => state.files);\n  const [selectedFileId, setSelectedFileId] = useState(null);\n  const [secureLinkFileId, setSecureLinkFileId] = useState(null);\n  const [email, setEmail] = useState('');\n  const [permission, setPermission] = useState('view');\n\n  useEffect(() => {\n    dispatch(fetchFiles());\n  }, [dispatch]);\n\n  const handleShare = (e) => {\n    e.preventDefault();\n    dispatch(shareFile({ fileId: selectedFileId, data: { email, permission } }));\n    setSelectedFileId(null);\n    setEmail('');\n  };\n\n  const handleGenerateSecureLink = (fileId) => {\n    dispatch(generateSecureLink(fileId));\n    setSecureLinkFileId(fileId);\n  };\n\n  const handleCopyToClipboard = () => {\n    if (secureLink) {\n      navigator.clipboard.writeText(secureLink);\n      alert('Secure link copied to clipboard!');\n    }\n  };\n\n  const handleDownload = (fileId) => {\n    dispatch(downloadFile(fileId));\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\n      <div className=\"w-full max-w-4xl bg-white shadow-md rounded-lg p-8\">\n        <h2 className=\"text-2xl font-bold text-gray-700 mb-6 text-center\">Your Files</h2>\n        <ul className=\"divide-y divide-gray-200\">\n          {files.map((file, index) => (\n            <li key={index} className=\"py-4 px-6 flex flex-col\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-700 font-medium\">{file.title}</span>\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={() => setSelectedFileId(file.file_id)}\n                    className=\"bg-blue-500 text-white py-1 px-3 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n                  >\n                    Share\n                  </button>\n                  <button\n                    onClick={() => handleGenerateSecureLink(file.file_id)}\n                    className=\"bg-green-500 text-white py-1 px-3 rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300\"\n                  >\n                    Generate Secure Link\n                  </button>\n                  <button\n                    onClick={() => handleDownload(file.file_id)}\n                    className=\"bg-gray-500 text-white py-1 px-3 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300\"\n                  >\n                    Download\n                  </button>\n                </div>\n              </div>\n              {secureLinkFileId === file.file_id && secureLink && (\n                <div className=\"mt-2 flex items-center\">\n                  <span className=\"text-gray-600\">Secure Link: {secureLink}</span>\n                  <button\n                    onClick={handleCopyToClipboard}\n                    className=\"ml-4 bg-blue-500 text-white py-1 px-3 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n                  >\n                    Copy to Clipboard\n                  </button>\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n        {selectedFileId && (\n          <div className=\"mt-6 p-6 bg-gray-50 border rounded-lg shadow-sm\">\n            <h3 className=\"text-lg font-semibold mb-4 text-gray-700\">\n              Share File (ID: {selectedFileId})\n            </h3>\n            <form onSubmit={handleShare}>\n              <div className=\"mb-4\">\n                <label htmlFor=\"email\" className=\"block text-gray-600 font-medium mb-2\">\n                  Recipient Email:\n                </label>\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"Enter recipient's email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  required\n                  className=\"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300\"\n                />\n              </div>\n              <div className=\"mb-4\">\n                <label htmlFor=\"permission\" className=\"block text-gray-600 font-medium mb-2\">\n                  Permission:\n                </label>\n                <select\n                  id=\"permission\"\n                  value={permission}\n                  onChange={(e) => setPermission(e.target.value)}\n                  className=\"w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300\"\n                >\n                  <option value=\"view\">View</option>\n                  <option value=\"download\">Download</option>\n                </select>\n              </div>\n              <div className=\"flex justify-end gap-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setSelectedFileId(null)}\n                  className=\"bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n                >\n                  Share\n                </button>\n              </div>\n            </form>\n          </div>\n        )}\n        <div className=\"mt-4 text-center\">\n          <Link to=\"/upload\" className=\"text-blue-500 hover:text-blue-700\">\n            Go to Upload Page\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FileListPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}